# __UNIDAD 1:__ ARQUITECTURAS WEB

### Links externos de esta unidad:
-  [Diapositivas de la Unidad 1](http://jamj2000.github.io/despliegueaplicacionesweb/1/diapositivas)  
-  [Actividades de la Unidad 1](http://jamj2000.github.io/despliegueaplicacionesweb/1/actividades)

- - -

## ndice
- 1 - Introducci贸n
- 2 - El protocolo HTTP
- 3 - Arquitecturas web
- 4 - Plataformas web
- 5 - Despliegue en Internet


- - -

## 1锔 - Introducci贸n


### 1.1 - En esta Unidad aprenderemos a

- Valorar los fundamentos y protocolos en los que se basa el funcionamiento de un servidor Web.
- Clasificar y describir los principales servidores de aplicaciones.
- Instalar y configurar de forma b谩sica servidores Web.
- Realizar pruebas de funcionamiento de los servidores web.


### 1.2 - 驴Qu茅 es Internet?
<img src="assets/internet.png" alt="internet" width="300"/>

- Un conjunto de **nodos** (equipos) conectados en forma de malla parcial.
- Un conjunto de **protocolos** para comunicar dichos nodos.
- Cada protocolo permite ofrecer un **servicio** o parte de 茅l.
- Dise帽o inicial **cliente/servidor**. 
- Los **equipos intermedios** se conectan con los **equipos finales**.


### 1.3 - Protocolos de Internet

- **HTTP** (World Wide Web)
- **FTP** (Transferencia de archivos)
- **DNS** (Resoluci贸n de nombres)
- **SMTP** (para env铆o de correo), **POP** e **IMAP** (para recibir correo) -> Correo el茅ctr贸nico
- **RIP** (enrutadores), **OSPF** (busca la ruta m谩s r谩pida), **BGP** (aunque enruta en ciertos nodos) -> Enrutamiento de paquetes
- **Telnet** (la informaci贸n no es cifrada), **SSH** (Conexi贸n remota por terminal)
- **VNC**, **RDP** (Conexi贸n remota gr谩fica)
- ... muchos m谩s


### 1.4 -Localizador Uniforme de Recursos (URL)

- Identifica un recurso en Internet. La forma b谩sica es:
  ```
  protocolo://servidor:puerto/ruta/recurso
  ```
  (El recurso puede ser un archivo, una imagen, etc ...)
  
- En algunos casos puede incluir par谩metros, credenciales, etc. Ejemplos:
  ```
  http://192.168.1.1/directorio/archivo.html
  ftp://archivos.example.com/descargas/ubuntu.iso
  https://pepe:1234@musica.com:1443/rock/descargar.php?album=37&formato=mp3
  ```

- - -

## 2锔 - El protocolo HTTP


### 2.1 - Caracter铆sticas

- Permite el **servicio WWW**.
- Desarrollado por el World Wide Web Consortium y la Internet Engineering Task Force.
- El servidor atiende peticiones en el **puerto 80**.
- La versi贸n m谩s usada actualmente es HTTP/1.1 ( RFC 2616 ).
- Tambi茅n existe la versi贸n HTTP/2, todav铆a poco usada.
- Existe la versi贸n segura, que es HTTPS, en la que el servidor atiende en el **puerto 443**.  
- Es es protocolo sin estado: no guarda ninguna informaci贸n sobre conexiones anteriores.

(El HTTP y el HTTPS son protocolos sin estado, es decir, no saben nada de las peticiones que se han realizado antes. Para ellos se usan las cookies y las variables de sesi贸n).


### 2.2 - Transacci贸n HTTP

![Transacci贸n HTTP](assets/transaccion-http.png)


#### Ejemplo de petici贸n

```
GET /index.html HTTP/1.1
Host: www.example.com
```


#### Ejemplo de respuesta

```
HTTP/1.1 200 OK
Date: Mon, 23 May 2005 22:38:34 GMT
Content-Type: text/html; charset=UTF-8
Content-Length: 138
Last-Modified: Wed, 08 Jan 2003 23:11:55 GMT
Server: Apache/1.3.3.7 (Unix) (Red-Hat/Linux)
Connection: close

<html>
<head>
  <title>An Example Page</title>
</head>
<body>
  Hello World, this is a very simple HTML document.
</body>
</html>
``` 


### 2.3 - M茅todos HTTP
#### M茅todos b谩sicos

- **GET**
- **POST**
- **PUT**
- **DELETE**

#### Otros m茅todos

- **HEAD**
- **OPTIONS**
- **CONNECT**
- **PATCH**
- **TRACE**

https://es.wikipedia.org/wiki/Protocolo_de_transferencia_de_hipertexto


### 2.4 - C贸digos de respuesta HTTP

- **1xx**: Mensajes.
- **2xx**: Operaci贸n exitosa.
- **3xx**: Redirecci贸n. 
- **4xx**: Errores del cliente.
- **5xx**: Errores del servidor.

[Lista de c贸digos de estado (en ingl茅s)](https://en.wikipedia.org/wiki/List_of_HTTP_status_codes)


### 2.5 - Cabeceras de la petici贸n

 Cabecera       |     Ejemplo                   |  Descripci贸n 
----------------|-------------------------------|--------------
Accept	        | Accept: text/html	            | Tipos de contenido que se admiten como respuesta.
Accept-Charset	| Accept-Charset: utf-8	        | Juegos de caracteres admitidos.
Accept-Encoding	| Accept-Encoding: gzip, deflate| Lista de codificaciones (compresi贸n) admitidas.
Accept-Language	| Accept-Language: en-US	    | Lista de idiomas admitidos como respuesta.
Host            | Host: en.wikipedia.org:8080   | Nombre de dominio del servidor (:puerto si es distinto de 80)
User-Agent      |User-Agent: Mozilla/5.0 (X11; Linux x86_64; rv:12.0) | Agente del usuario.
...             | ...                           | ...


### 2.6 - Cabeceras de la respuesta

 Cabecera       |     Ejemplo                   |  Descripci贸n 
----------------|-------------------------------|--------------
Content-Encoding| Content-Encoding: gzip        | Codificiaci贸n de los datos enviados.
Content-Language| Content-Language: es          | Idioma en el que est谩 el contenido.
Content-Type    | Content-Type: text/html; charset=utf-8 | Tipo MIME del contenido.
Server          | Server: Apache/2.4.1 (Unix)   | Servidor web.
Status          | Status: 200 OK                | C贸digo de estado.
...             | ...                           | ...


### 2.7 - Tipos MIME 
**Multipurpose Internet Mail Extension**

Tipo MIME             | Tipo de contenido
----------------------|-----------------------------
text/plain            | Texto plano
text/html             | Texto en formato HTML
text/css              | Hoja de estilo en cascada
application/javascript| C贸digo javascript
application/json      | Datos en formato JSON
image/jpeg            | Imagen en formato JPEG
image/png             | Imagen en formato PNG
image/svg+xml         | Imagen vectorial SVG
audio/ac3             | Audio en formato AC3
audio/ogg             | Audio en formato OGG Vorbis
video/H264            | Video con codificaci贸n H.264
...                   | ...

(JSON es para datos, pero se clasifica como aplicaci贸n)


### 2.8 - Petici贸n HTTP

![Petici贸n HTTP](assets/peticion-http.png)

- - -

## 3锔 - Arquitecturas web


### 3.1 - Capas de la arquitectura

- **Capa de presentaci贸n**: se encarga de la navegabilidad, validaci贸n de los datos de entrada, formateo de los datos de salida, presentaci贸n de la web, etc.; se trata de la capa que se presenta al usuario.
- **Capa de negocio**: recibe las peticiones del usuario y desde donde se le env铆an las respuestas; en esta capa se verifican que las reglas establecidas se cumplen.
- **Capa de acceso a datos**: es la formada por determinados gestores de datos que se encargan de almacenar, estructurar y recuperar los datos solicitados por la capa de negocio.


### 3.2 - Modelo de 2 capas
(No usa BDDSS)

![Web 2 capas](assets/web-2-capas.png)


### 3.3 - Modelo de 3 capas
(Usa BBDD)

![Web 3 capas](assets/web-3-capas.png)


### 3.4 - P谩ginas est谩ticas

- **HTML**
- **CSS**
- **Javascript**
- **Assets** (im谩genes, fuentes de letra, ...)


### 3.5 - P谩ginas din谩micas

- **PHP**: PHP Hypertext Preprocessor.
- **JSP**: JavaServer Pages. 
- **ASP**: Active Server Pages. 

- - -

## 4锔 - Plataformas

- **LAMP**. Linux + Apache + MySQL + PHP. **Libre**.
- **WISA**. Windows + IIS + SQLServer + ASP. **Propietaria**.


### 4.1 - Servidores web

- **Apache**
- **nginx**
- **IIS** (Internet Information Server de Microsoft)
- **Tomcat** (servidor orientado a desarrollo Java) -> contenedor de servlets

### 4.2 - Apache
#### Directorios y archivos de configuraci贸n

![Apache2](assets/apache2-files.png)

- - -

## 5锔 - Despliegue en Internet


### 5.1 - Escalabilidad

- **Vertical** -> Servidores m谩s potentes.  
- **Horizontal** -> M谩s servidores.


### 5.2 - Tipos de servidores
#### Evoluci贸n

- Sin virtualizaci贸n (hosting tradicional)
  - **Servidor dedicado**
  - **Servidor compartido**

- Con virtualizaci贸n 
  - Servidor virtual (**VPS** - Virtual Private Server)
  - Nube (**Cloud**)


### 5.3 - La nube
#### Tipos de servicios ###

- **IaaS**. Infraestructura como Servicio. 
- **PaaS**. Plataforma como Servicio.
- **SaaS**. Servicio como Servicio. 

[Diferencias entre IaaS, PaaS y SaaS](https://www.genbeta.com/desarrollo/entendiendo-la-nube-el-significado-de-saas-paas-y-iaas)

#### Proveedores ###

<img src="assets/cloud-amazon.png" alt="Amazon - GCP - Azure" width="350"/>
<img src="assets/cloud-heroku.png" alt="Heroku - Openshift - DigitalOcean" width="350"/>